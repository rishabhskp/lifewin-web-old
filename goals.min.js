window.onload=function t(){console.log("window.onload = function refresh() function called");window.addEventListener("load",function(){window.applicationCache.addEventListener("updateready",function(){window.applicationCache.status==window.applicationCache.UPDATEREADY&&confirm("A new version of this site is available. Load it?")&&window.location.reload()},!1)},!1);if(null===localStorage.getItem("meta")){var e=new Date,c=e.getDate(),a=e.getMonth()+1,e=e.getFullYear();10>a&&(a="0"+a);10>c&&(c="0"+c);
var c='{"date":"'+(""+c+"-"+a+"-"+e)+'","Present":0,"Future":0,"Today":0,"Tomorrow":0,"This Week":0,"Later":0,"Habits":0,"Frequent":0,"timer":0,"lastTimer":0,"daily":"00","weekly":"00","initialPos":0,"list":"Tasks","Goals":["Present","Future"],"Tasks":["Today","Tomorrow","This Week","Later"],"Dailies":["Habits","Frequent"],"Winstate":[" "]}',b="{}";localStorage.setItem("meta",c);localStorage.setItem("GoalsDetails","{}");localStorage.setItem("GoalsNames","[]");localStorage.setItem("TasksDetails","{}");
localStorage.setItem("TasksNames","[]");localStorage.setItem("DailiesDetails","{}");localStorage.setItem("DailiesNames","[]");localStorage.setItem("WinstateDetails",'{"Yes! I Did It!":{"count":0}}');localStorage.setItem("WinstateNames",'["Yes! I Did It!"]');localStorage.setItem("scoreboard",b)}c=localStorage.getItem("meta");c=JSON.parse(c);document.getElementById("time").innerHTML=formatTime(c.lastTimer)+"  -  "+formatTime(c.timer);a=new Date;0==a.getDay()&&(c.weekly="00");e=a.getDate();b=a.getMonth()+
1;a=a.getFullYear();10>b&&(b="0"+b);10>e&&(e="0"+e);a=""+e+"-"+b+"-"+a;e=c.date;if(a!=e){localStorage.setItem("date",a);var m=c.daily,b=localStorage.getItem("scoreboard");if(-1!=b.indexOf(a)){var g=JSON.parse(b);c.daily=g[a]}else c.daily="00";-1!=b.indexOf(e)?(g=JSON.parse(b),console.log("scoreboard = "+b),console.log("date = "+e),console.log("scoreboardObj = "+g),g[e]=m,b=JSON.stringify(g)):(b=b.slice(0,-1),"{"!=b&&(b+=","),b+='"'+e+'":"'+m+'"}');localStorage.setItem("meta",JSON.stringify(c));localStorage.setItem("scoreboard",
b)}u();c=new Date;setTimeout(function(){t()},new Date(c.getFullYear(),c.getMonth(),c.getDate()+1)-c);b=localStorage.getItem("scoreboard");b=b.split("[").join("");b=b.split("]").join("");b=b.split("{").join("");b=b.split("}").join("");localStorage.setItem("scoreboard","{"+b+"}")};function u(){console.log("list function called");var h=JSON.parse(localStorage.getItem("meta"));h.list="Tasks";localStorage.setItem("meta",JSON.stringify(h));$("#input").show();$(".tags").show();v()}
function x(h,e){console.log("setDueDate function called");var c=JSON.parse(localStorage.getItem("meta")).list,a=localStorage.getItem(c+"Names"),a=JSON.parse(a),b=localStorage.getItem(c+"Details"),b=JSON.parse(b),m=new Date,m=Math.ceil((Date.parse(h)-Date.parse(m))/864E5);b[a[e]].g=h;h=""+h.slice(8)+"/"+parseInt(h.slice(5,-3));document.getElementById("gd"+e).innerHTML=h;document.getElementById("gn"+e).innerHTML=m;localStorage.setItem(c+"Details",JSON.stringify(b))}
function v(){console.log("loadData() function called");for(var h=document.getElementById("list");h.firstChild;)h.removeChild(h.firstChild);var e=localStorage.getItem("meta"),h=JSON.parse(e),c=h.list,a=localStorage.getItem(c+"Names"),b=localStorage.getItem(c+"Details"),a=JSON.parse(a),b=JSON.parse(b);document.getElementById("daily").innerHTML=h.c;document.getElementById("weekly").innerHTML=h.e;document.getElementById("listname").innerHTML=h.list;document.getElementById("newEntry").setAttribute("placeholder",
"Add "+h.list+"...");console.log("meta ="+e);console.log("listname = "+c);document.getElementById("firstTag").innerHTML=h[c][0];document.getElementById("tagCount0").innerHTML=h[h[c][0]];for(var e=1,m=h[c].length-1,g=0;g<a.length;g++){for(;0!=m&&b[a[g]].tag!=h[c][e-1];)y(e),e++,m--;if("Tasks"!=c){var d=new Date,f=d.getDate(),q=d.getMonth()+1,d=d.getFullYear();10>q&&(q="0"+q);10>f&&(f="0"+f);key=""+q+d}q=document.createElement("div");q.setAttribute("class","inTag"+(e-1));d=document.createElement("div");
d.setAttribute("class","input-group");var p=document.createElement("span");p.setAttribute("class","input-group-addon");var l=document.createElement("input");l.setAttribute("type","checkbox");l.setAttribute("class","checkbox");l.setAttribute("id","check"+g);"Tasks"!=c&&0<=$.f(f,b[a[g]].key)&&l.setAttribute("checked","true");var k=document.createElement("label");k.setAttribute("for","check"+g);p.appendChild(l);p.appendChild(k);d.appendChild(p);p=document.createElement("a");p.setAttribute("href","#");
p.setAttribute("class","list list-group-item");p.setAttribute("id","g"+g);l=document.createElement("span");l.setAttribute("id","entryText"+g);l.innerHTML=a[g];p.appendChild(l);l=document.createElement("span");l.setAttribute("class","toolbar");streakCount=document.createElement("span");streakCount.setAttribute("id","co"+g);streakCount.setAttribute("class","");"Tasks"!=c&&(streakCount.innerHTML=b[a[g]].count,streakIcon=document.createElement("span"),streakIcon.setAttribute("class","glyphicon glyphicon-link"),
l.appendChild(streakCount),l.appendChild(streakIcon));if("Winstate"!=c&&"Dailies"!=c){k=document.createElement("span");k.setAttribute("class","duedate");k.setAttribute("id","du"+g);var n=document.createElement("span");n.setAttribute("id","gd"+g);var s=document.createElement("span");s.setAttribute("class","glyphicon glyphicon-calendar");var r=document.createElement("span");r.setAttribute("id","gn"+g);var w=document.createElement("span");w.setAttribute("class","glyphicon glyphicon-time");k.appendChild(n);
k.appendChild(s);k.appendChild(r);k.appendChild(w);l.appendChild(k)}"Winstate"!=c&&(k=document.createElement("span"),k.setAttribute("id","ed"+g),k.setAttribute("class","edit glyphicon glyphicon-pencil"),l.appendChild(k),k=document.createElement("span"),k.setAttribute("id","d"+g),k.setAttribute("class","del glyphicon glyphicon-trash"),l.appendChild(k));if("Tasks"==c||"Dailies"==c)k=document.createElement("span"),k.setAttribute("class","point badge"),k.setAttribute("id","p"+g),k.innerHTML=b[a[g]].h,
l.appendChild(k);p.appendChild(l);d.appendChild(p);q.appendChild(d);d=document.createElement("div");d.setAttribute("id","gs"+g);d.setAttribute("class","duedatepicker");q.appendChild(d);"Tasks"!=c&&(d=document.createElement("div"),d.setAttribute("id","gc"+g),d.setAttribute("class","datepicker"),q.appendChild(d));document.getElementById("list").appendChild(q);"Winstate"!=c&&""!=b[a[g]].g&&x(b[a[g]].g,g);"Dailies"!=c&&$(".duedatepicker").click();"Tasks"!=c&&$(".datepicker").click()}"Dailies"!=c&&$(".duedatepicker").d();
for("Tasks"!=c&&"Winstate"!=c&&$(".datepicker").d();0!=m;)y(e),e++,m--}
function y(h){console.log("createTags() function called");var e=JSON.parse(localStorage.getItem("meta")).list,c=localStorage.getItem("meta"),c=JSON.parse(c),a=localStorage.getItem(e+"Details");JSON.parse(a);var a=document.createElement("li"),b=document.createElement("span");b.setAttribute("class","badge");a.setAttribute("class","tags list list-group-item");a.setAttribute("id","tag"+h);var m=document.createTextNode(c[e][h]);b.setAttribute("id","tagCount"+h);b.innerHTML=c[c[e][h]];a.appendChild(m);
a.appendChild(b);document.getElementById("list").appendChild(a)}
$(document).s(function(){function h(a){console.log("enableFuture() function called");var b=JSON.parse(localStorage.getItem("meta")).list,c=$(this).a("id").slice(2);listNames=localStorage.getItem(b+"Names");listNamesObj=JSON.parse(listNames);listDetails=localStorage.getItem(b+"Details");listDetailsObj=JSON.parse(listDetails);var g=a.getDate(),d=a.getMonth()+1;a=a.getFullYear();10>d&&(d="0"+d);a=""+a+"-"+d+"-"+g;if("Winstate"!=b&&a==listDetailsObj[listNamesObj[c]].g)return[!0,"tickDay"];b=new Date;
return 0<Date.parse(a)-Date.parse(b)?[!0]:[!1]}function e(a,b){console.log("alterCSS() function called");var c=JSON.parse(localStorage.getItem("meta")).list;b=b||$(this).a("id").slice(2);listNames=localStorage.getItem(c+"Names");listNamesObj=JSON.parse(listNames);listDetails=localStorage.getItem(c+"Details");listDetailsObj=JSON.parse(listDetails);var c=a.getDate(),g=a.getMonth()+1;10>g&&(g="0"+g);if(0<=$.f(c,listDetailsObj[listNamesObj[b]][""+g+a.getFullYear()]))return[!0,"tickDay"];c=new Date;return 0<
Date.parse(a)-Date.parse(c)?[!1]:[!0]}function c(a,b){console.log("addDay() function called");var c=JSON.parse(localStorage.getItem("meta")).list;isNaN(b)&&(b=$(this).a("id").slice(2));var g=localStorage.getItem(c+"Names"),d=localStorage.getItem(c+"Details"),g=JSON.parse(g),d=JSON.parse(d),f=parseInt(a.slice(0,-6)),e=a.slice(2);void 0===d[g[b]][e]&&(d[g[b]][e]=[]);-1==$.f(f,d[g[b]][e])?d[g[b]][e].push(f):d[g[b]][e].splice(d[g[b]][e].indexOf(f),1);d[g[b]].count=-1;f=new Date;do{d[g[b]].count++;var f=
new Date(f.getFullYear(),f.getMonth(),f.getDate()-1),e=f.getDate(),h=f.getMonth()+1;10>h&&(h="0"+h);h=""+h+f.getFullYear()}while(0<=$.f(e,d[g[b]][h]));f=new Date;e=f.getDate();h=f.getMonth()+1;10>h&&(h="0"+h);0<=$.f(e,d[g[b]][""+h+f.getFullYear()])&&d[g[b]].count++;document.getElementById("co"+b).innerHTML=d[g[b]].count;localStorage.setItem(c+"Details",JSON.stringify(d))}$("[data-toggle=offcanvas]").click(function(){$(".row-offcanvas").v("active")});$(document).b("click",".duedatepicker",function(){console.log("$(document).on('click','.duedatepicker',function() called");
$(".duedatepicker").k({i:h,j:"yy-mm-dd",l:function(a){var b=$(this).a("id").slice(2);x(a,b);var c=JSON.parse(localStorage.getItem("meta")).list;if("Tasks"==c){var g=JSON.parse(localStorage.getItem(c+"Details")),d=new Date;a=Math.ceil((Date.parse(a)-Date.parse(d))/864E5);console.log(a);g[listNamesObj[b]].tag=1==a?"Today":2==a?"Tomorrow":8>a?"This Week":"Later";localStorage.setItem(c+"Details",JSON.stringify(g));v()}}})});$(document).b("click",".datepicker",function(){console.log("$(document).on('click','.datepicker',function() called");
$(".datepicker").k({i:e,j:"ddmmyy",l:c})});$(document).b("change",".checkbox",function(){console.log("$(document).on('change','.checkbox',function() called");var a=JSON.parse(localStorage.getItem("meta")).list,b=$(this).parent().next().a("id").slice(1);if("Tasks"==a||"Dailies"==a){var e=localStorage.getItem(a+"Details"),g=localStorage.getItem(a+"Names"),e=JSON.parse(e),g=JSON.parse(g),d=parseInt(e[g[b]].h);console.log("addPoints function called");"quickAdd"==d&&(d=document.getElementById("points").value,
document.getElementById("quickAdd").reset());var f=JSON.parse(localStorage.getItem("meta"));f.c=parseInt(f.c)+parseInt(d);f.e=parseInt(f.e)+parseInt(d);10>f.c&&(f.c="0"+f.c);10>f.e&&(f.e="0"+f.e);localStorage.setItem("meta",JSON.stringify(f));document.getElementById("daily").innerHTML=f.c;document.getElementById("weekly").innerHTML=f.e;$(this).r("checked",!1)}"Tasks"==a?z(b):(d=new Date,f=d.getDate(),10>f&&(f="0"+f),e=d.getMonth()+1,10>e&&(e="0"+e),10>f&&(f="0"+f),d=""+f+e+d.getFullYear(),"Dailies"==
a?(e=localStorage.getItem(a+"Details"),e=JSON.parse(e),void 0!==e[g[b]].key&&-1!=$.f(f,e[g[b]].key)||c(d,b)):c(d,b))});$(document).b("click",".point",function(a){console.log("$(document).on('click','.point', function(e) function called");a.stopImmediatePropagation();var b=JSON.parse(localStorage.getItem("meta")).list;a=localStorage.getItem(b+"Details");var c=localStorage.getItem(b+"Names"),g=JSON.parse(a),d=JSON.parse(c),f=$(this).a("id").slice(1);$("#p"+f).a("contentEditable",!0).focus().blur(function(){$(this).a("contentEditable",
!1);g[d[f]].h=$(this).text();localStorage.setItem(b+"Details",JSON.stringify(g))})});$(document).b("click",".edit",function(a){console.log("$(document).on('click','.edit', function(e) called");a.stopImmediatePropagation();a=$(this).a("id").slice(2);var b=$("#entryText"+a).text();$("#entryText"+a).a("contentEditable",!0).focus().blur(function(){$(this).a("contentEditable",!1);var a=$(this).text();if(b!=a&&""!=a){console.log("edit function called");var c=JSON.parse(localStorage.getItem("meta")).list,
d=localStorage.getItem(c+"Names"),f=localStorage.getItem(c+"Details"),d=JSON.parse(d),f=JSON.parse(f);localStorage.setItem(a,localStorage.getItem(b));localStorage.removeItem(b);d.splice(d.indexOf(b),1,a);f[a]=f[b];delete f[b];localStorage.setItem(c+"Names",JSON.stringify(d));localStorage.setItem(c+"Details",JSON.stringify(f));v()}})});$(document).b("click",".del",function(a){console.log("$(document).on('click','.del',function(e) fuction called");a.stopImmediatePropagation();a=$(this).a("id").slice(1);
z(a)});$(document).b("click",".duedate",function(a){console.log("$(document).on('click','.duedate',function(e) called");a.stopImmediatePropagation();a=$(this).a("id").slice(2);$("#gs"+a).toggle();$("#gc"+a).d()});$(document).b("click",".list",function(){console.log("$(document).on('click', '.list', function(e) called");if("Winstate"!=JSON.parse(localStorage.getItem("meta")).list){$("#popup").n({left:"335px"});var a=$(this).a("id").slice(1);$(".datepicker:not(#gc"+a+")").d();$("#gc"+a).toggle();$(".duedatepicker").d()}});
$("#list").u({start:function(a,b){console.log("start function in sortable called");$(".datepicker").d();$(".duedatepicker").d();var c=$(b.item).index(),g=JSON.parse(localStorage.getItem("meta"));g.initialPos=c;localStorage.setItem("meta",JSON.stringify(g))},update:function(a,b){console.log("update() function in sortable called");var c=JSON.parse(localStorage.getItem("meta")).initialPos,g=$(b.item).index(),d=localStorage.getItem("meta"),d=JSON.parse(d),f=d.list,e=localStorage.getItem(f+"Names"),e=
JSON.parse(e),h=localStorage.getItem(f+"Details"),h=JSON.parse(h),l=-1,k=0,n=0,s=c;c>g&&c++;var r=g;$(".list").p(function(){l++;$(this).q("tags")&&(l<g&&(r--,n++),l<c&&(s--,k++))});e.move(s,r);h[e[r]].tag=d[f][n];d[d[f][n]]++;d[d[f][k]]--;$("#g"+s).parent().parent().t().m("inTag"+n);document.getElementById("tagCount"+n).innerHTML++;document.getElementById("tagCount"+k).innerHTML--;localStorage.setItem("meta",JSON.stringify(d));localStorage.setItem(f+"Names",JSON.stringify(e));localStorage.setItem(f+
"Details",JSON.stringify(h));"Tasks"==f&&k!=n&&(d=n,2==n?d=7:3==n&&(d=14),f=new Date,d=new Date(f.getFullYear(),f.getMonth(),f.getDate()+d),f=d.getDate(),10>f&&(f="0"+f),e=d.getMonth()+1,10>e&&(e="0"+e),d=""+d.getFullYear()+"-"+e+"-"+f,x(d,r));v()},axis:"y",cancel:"div.cal",cancel:".tags"});$("#list").o()});
function z(h){console.log("del() function called");var e=localStorage.getItem("meta"),e=JSON.parse(e),c=e.list,a=localStorage.getItem(c+"Names"),b=localStorage.getItem(c+"Details"),a=JSON.parse(a),b=JSON.parse(b);e[b[a[h]].tag]--;delete b[a[h]];a.splice(h,1);localStorage.setItem("meta",JSON.stringify(e));localStorage.setItem(c+"Names",JSON.stringify(a));localStorage.setItem(c+"Details",JSON.stringify(b));v()}
Array.prototype.move=function(h,e){console.log("Array.prototype.move = function called");this.splice(e,0,this.splice(h,1)[0])};

